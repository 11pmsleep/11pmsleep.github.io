<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>0x04 - 网络协议基础 | 晚上十一点睡觉</title><meta name="keywords" content="计算机网络"><meta name="author" content="晚上十一点睡觉"><meta name="copyright" content="晚上十一点睡觉"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="计算机网络基础知识 网络协议分层 「网络协议分层」  对于同一台设备上的进程间通信，有很多种方式，比如有管道、消息队列、共享内存、信号等方式， 而对于不同设备上的进程间通信，就需要网络通信，而设备是多样性的，所以要兼容多种多样的设备，就协商出了一套通用的网络协议。这个网络协议是分层的，每一层都有各自的作用和职责，通常是由上到下，分成 5层。接下来就分别对每一层进行介绍。  应用层 传输层 网络层">
<meta property="og:type" content="article">
<meta property="og:title" content="0x04 - 网络协议基础">
<meta property="og:url" content="https://11pmsleep.github.io/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/0x04%20-%20%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E5%9F%BA%E7%A1%80.html">
<meta property="og:site_name" content="晚上十一点睡觉">
<meta property="og:description" content="计算机网络基础知识 网络协议分层 「网络协议分层」  对于同一台设备上的进程间通信，有很多种方式，比如有管道、消息队列、共享内存、信号等方式， 而对于不同设备上的进程间通信，就需要网络通信，而设备是多样性的，所以要兼容多种多样的设备，就协商出了一套通用的网络协议。这个网络协议是分层的，每一层都有各自的作用和职责，通常是由上到下，分成 5层。接下来就分别对每一层进行介绍。  应用层 传输层 网络层">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202208211308764.jpg">
<meta property="article:published_time" content="2022-09-30T12:07:05.000Z">
<meta property="article:modified_time" content="2022-10-31T04:31:27.021Z">
<meta property="article:author" content="晚上十一点睡觉">
<meta property="article:tag" content="计算机网络">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202208211308764.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://11pmsleep.github.io/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/0x04%20-%20%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E5%9F%BA%E7%A1%80"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: 晚上十一点睡觉","link":"链接: ","source":"来源: 晚上十一点睡觉","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '0x04 - 网络协议基础',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-10-31 12:31:27'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202208151640204.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">89</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">43</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">37</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202208211308764.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">晚上十一点睡觉</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">0x04 - 网络协议基础</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-09-30T12:07:05.000Z" title="发表于 2022-09-30 20:07:05">2022-09-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-31T04:31:27.021Z" title="更新于 2022-10-31 12:31:27">2022-10-31</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">14.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>46分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="0x04 - 网络协议基础"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/0x04%20-%20%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E5%9F%BA%E7%A1%80.html#post-comment"><span id="twikoo-count"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>计算机网络基础知识</p>
<h1 id="网络协议分层"><a href="#网络协议分层" class="headerlink" title="网络协议分层"></a>网络协议分层</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/lroONaj5dVM0z7MD7DPE_A">「网络协议分层」</a></p>
</blockquote>
<p>对于<strong>同一台设备</strong>上的进程间通信，有很多种方式，比如有<strong>管道、消息队列、共享内存、信号</strong>等方式，</p>
<p>而对于<strong>不同设备</strong>上的进程间通信，就需要网络通信，而设备是多样性的，所以要兼容多种多样的设备，就协商出了<strong>一套通用的网络协议</strong>。这个网络协议是分层的，每一层都有各自的作用和职责，通常是由上到下，分成 5层。接下来就分别对每一层进行介绍。</p>
<ul>
<li>应用层</li>
<li>传输层</li>
<li>网络层</li>
<li>数据链路层</li>
<li>物理层</li>
</ul>
<h2 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h2><p>最上层的，也是我们能直接接触到的就是应用层（ Application Layer ），我们电脑或手机使用的应用软件都是在应用层实现。那么，当两个不同设备的应用需要通信的时候，应用就把应用数据传给下一层，也就是传输层。所以，应用层只需要专注于为用户提供应用功能，不用去关心数据是如何传输的，就类似于，我们寄快递的时候，只需要把包裹交给快递员，由他负责运输快递，我们不需要关心快速是如何被运输的。</p>
<p>而且<strong>应用层是工作在操作系统中的用户态，传输层及以下则工作在内核态</strong>。</p>
<h2 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h2><p>应用层的数据包会传给传输层，传输层（Transport Layer）是为应用层提供网络支持的。</p>
<p>在传输层会有两个传输协议，分别是 TCP 和 UDP。</p>
<ul>
<li>TCP 的全称叫传输层控制协议（Transmission Control Protocol），大部分应用使用的正是 TCP 传输层协议，比如 HTTP 应用层协议。TCP 相比 UDP 多了很多特性，比如<strong>流量控制、超时重传、拥塞控制</strong>等，这些都是为了保证数据包能可靠地传输给对方。</li>
<li>UDP 就相对很简单，简单到只负责发送数据包，不保证数据包是否能抵达对方，但它实时性相对更好，传输效率也高。当然，UDP 也可以实现可靠传输，把 TCP 的特性在应用层上实现就可以，不过要实现一个商用的可靠 UDP 传输协议，也不是一件简单的事情。</li>
</ul>
<p>应用需要传输的数据可能会非常大，如果直接传输就不好控制，因此当传输层的数据包大小超过 MSS（TCP 最大报文段长度） ，就要将数据包分块，这样即使中途有一个分块丢失或损坏了，只需要重新这一个分块，而不用重新发送整个数据包。在 TCP协议中，我们把每个分块称为一个 TCP 段（TCP Segment）。</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302014980.png" alt="image-20220930201436565" style="zoom:50%;" />

<p>当设备作为接收方时，传输层则要负责把数据包传给应用，但是一台设备上可能会有很多应用在接收或者传输数据，因此需要用一个编号将应用区分开来，这个编号就是端口。比如 80 端口通常是 Web 服务器用的，22 端口通常是远程登录服务器用的。而对于浏览器（客户端）中的每个标签栏都是一个独立的进程，操作系统会为这些进程分配临时的端口号。由于传输层的报文中会携带端口号，因此接收方可以识别出该报文是发送给哪个应用</p>
<h2 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h2><p>传输层可能大家刚接触的时候，会认为它负责将数据从一个设备传输到另一个设备，事实上它并不负责。实际场景中的网络环节是错综复杂的，中间有各种各样的线路和分叉路口，如果一个设备的数据要传输给另一个设备，就需要在各种各样的路径和节点进行选择，而传输层的设计理念是简单、高效、专注，如果传输层还负责这一块功能就有点违背设计原则了。</p>
<p>也就是说，我们不希望传输层协议处理太多的事情，只需要服务好应用即可，让其作为应用间数据传输的媒介，帮助实现应用到应用的通信，而实际的传输功能就交给下一层，也就是网络层（Internet Layer）。</p>
<p>网络层最常使用的是 IP 协议（Internet Protocol），IP 协议会将传输层的报文作为数据部分，再加上 IP 包头组装成 IP 报文，如果 IP 报文大小超过 MTU（以太网中一般为 1500 字节）就会再次进行分片，得到一个即将发送到网络的 IP 报文。</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302016036.png" alt="image-20220930201610710" style="zoom:50%;" />

<p>网络层负责将数据从一个设备传输到另一个设备，世界上那么多设备，又该如何找到对方呢？因此，网络层需要有区分设备的编号。</p>
<p>我们一般用 IP 地址给设备进行编号，对于 IPv4 协议， IP 地址共 32 位，分成了四段，每段是 8 位。只有一个单纯的 IP 地址虽然做到了区分设备，但是寻址起来就特别麻烦，全世界那么多台设备，难道一个一个去匹配？这显然不科学。因此，需要将 IP 地址分成两种意义：</p>
<ul>
<li>一个是网络号，负责标识该 IP 地址是属于哪个子网的；</li>
<li>一个是主机号，负责标识同一子网下的不同主机；</li>
</ul>
<p>怎么分的呢？这需要配合子网掩码才能算出 IP 地址 的网络号和主机号。那么在寻址的过程中，先匹配到相同的网络号，才会去找对应的主机。</p>
<p><strong>除了寻址能力， IP 协议还有另一个重要的能力就是路由。</strong></p>
<p>实际场景中，两台设备并不是用一条网线连接起来的，而是通过很多网关、路由器、交换机等众多网络设备连接起来的，那么就会形成很多条网络的路径，因此当数据包到达一个网络节点，就需要通过算法决定下一步走哪条路径。所以，IP 协议的寻址作用是告诉我们去往下一个目的地该朝哪个方向走，路由则是根据「下一个目的地」选择路径。</p>
<p><strong>寻址</strong>更像在导航，<strong>路由</strong>更像在操作方向盘。</p>
<h2 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h2><p>实际场景中，网络并不是一个整体，比如你家和我家就不属于一个网络，所以数据不仅可以在同一个网络中设备间进行传输，也可以跨网络进行传输。一旦数据需要跨网络传输，就需要有一个设备同时在两个网络当中，这个设备一般是路由器，路由器可以通过路由表计算出下一个要去的 IP 地址。那问题来了，路由器怎么知道这个 IP 地址是哪个设备的呢？于是，就需要有一个专门的层来标识网络中的设备，让数据在一个链路中传输，这就是数据链路层（Data Link Layer），它主要为网络层提供链路级别传输的服务。</p>
<p>每一台设备的网卡都会有一个 MAC 地址，它就是用来唯一标识设备的。路由器计算出了下一个目的地 IP 地址，再通过 ARP 协议找到该目的地的 MAC 地址，这样就知道这个 IP 地址是哪个设备的了。</p>
<h2 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a>物理层</h2><p>当数据准备要从设备发送到网络时，需要把数据包转换成电信号，让其可以在物理介质中传输，这一层就是物理层（Physical Layer），它主要是为数据链路层提供二进制传输的服务。</p>
<h1 id="图解IP"><a href="#图解IP" class="headerlink" title="图解IP"></a>图解IP</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/qydIO7NDfFTYs4-ZZlfgRg">IP 基础知识“全家桶”，45 张图一套带走</a></p>
</blockquote>
<h2 id="IP基本认识"><a href="#IP基本认识" class="headerlink" title="IP基本认识"></a>IP基本认识</h2><h3 id="IP的作用："><a href="#IP的作用：" class="headerlink" title="IP的作用："></a>IP的作用：</h3><p>网络层的主要作用是：实现主机与主机之间的通信，也叫点对点（end to end）通信。</p>
<h3 id="IP与MAC的关系"><a href="#IP与MAC的关系" class="headerlink" title="IP与MAC的关系:"></a>IP与MAC的关系:</h3><p>IP（网络层） 和 MAC （数据链路层）之间的区别和关系在上面我们知道 IP 的作用是主机之间通信的，而 MAC 的作用则是实现「直连」的两个设备之间通信，而 IP 则负责在「没有直连」的两个网络之间进行通信传输。</p>
<p>举个生活的栗子，小林要去一个很远的地方旅行，制定了一个行程表，其间需先后乘坐飞机、地铁、公交车才能抵达目的地，为此小林需要买飞机票，地铁票等。飞机票和地铁票都是去往特定的地点的，每张票只能够在某一限定区间内移动，此处的「区间内」就如同通信网络中数据链路。在区间内移动相当于数据链路层，充当区间内两个节点传输的功能，区间内的出发点好比源 MAC 地址，目标地点好比目的 MAC 地址。整个旅游行程表就相当于网络层，充当远程定位的功能，行程的开始好比源 IP，行程的终点好比目的 IP 地址。</p>
<p>如果小林只有行程表而没有车票，就无法搭乘交通工具到达目的地。相反，如果除了车票而没有行程表，恐怕也很难到达目的地。因为小林不知道该坐什么车，也不知道该在哪里换乘。因此，只有两者兼备，既有某个区间的车票又有整个旅行的行程表，才能保证到达目的地。与此类似，计算机网络中也需要「数据链路层」和「网络层」这个分层才能实现向最终目标地址的通信。还有重要一点，旅行途中我们虽然不断变化了交通工具，但是旅行行程的起始地址和目的地址始终都没变。其实，在网络中数据包传输中也是如此，源IP地址和目标IP地址在传输过程中是不会变化的，只有源 MAC 地址和目标 MAC 一直在变化。</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302022945.png" alt="image-20220930202241592" style="zoom:50%;" />

<h2 id="IP地址的基础知识"><a href="#IP地址的基础知识" class="headerlink" title="IP地址的基础知识"></a>IP地址的基础知识</h2><h3 id="IP地址的定义"><a href="#IP地址的定义" class="headerlink" title="IP地址的定义"></a>IP地址的定义</h3><p>在 TCP&#x2F;IP 网络通信时，为了保证能正常通信，每个设备都需要配置正确的 IP 地址，否则无法实现正常的通信。IP 地址（IPv4 地址）由 32 位正整数来表示，IP 地址在计算机是以二进制的方式处理的。</p>
<p>而人类为了方便记忆采用了点分十进制的标记方式，也就是将 32 位 IP 地址以每 8位为组，共分为 4 组，每组以<code>.</code>隔开，再将每组转换成十进制。</p>
<p>实际上，<strong>IP 地址并不是根据主机台数来配置的</strong>，而是以网卡。像服务器、路由器等设备都是有 2 个以上的网卡，也就是它们会有 2 个以上的 IP 地址。</p>
<h3 id="IP地址分类"><a href="#IP地址分类" class="headerlink" title="IP地址分类"></a>IP地址分类</h3><p>互联网诞生之初，IP 地址显得很充裕，于是计算机科学家们设计了分类地址。IP 地址分类成了 5 种类型，分别是 A 类、B 类、C 类、D 类、E 类。</p>
<ul>
<li>上图中黄色部是分类号，用以区分 IP 地址类别。</li>
</ul>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302024716.png" alt="image-20220930202424434" style="zoom:50%;" />

<ul>
<li>其中对于 A、B、C 类主要分为两个部分，分别是网络号和主机号。这很好理解，好比小林是 A 小区 1 栋 101 号，你是 B 小区 1 栋 101 号。我们可以用下面这个表格， 就能很清楚的知道 A、B、C 分类对应的地址范围、最大主机个数。</li>
</ul>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302026244.png" alt="image-20220930202607970" style="zoom:50%;" />

<ul>
<li>A、B、C 分类地址最大主机个数是如何计算的呢？</li>
</ul>
<p>最大主机个数，就是要看主机号的位数，如 C 类地址的主机号占 8 位，那么 C 类地址的最大主机个数：<code>2^8- 2 = 254</code></p>
<p>为什么要减 2 呢？因为在 IP 地址中，有两个 IP 是特殊的，分别是主机号全为 1 和 全为 0 地址。因此，在分配过程中，应该去掉这两种情况。</p>
<blockquote>
<ul>
<li>主机号全为 1 指定某个网络下的所有主机，用于广播</li>
<li>主机号全为 0 指定某个网络</li>
</ul>
</blockquote>
<ul>
<li>广播地址用于什么？</li>
</ul>
<p>广播地址用于在同一个链路中相互连接的主机之间发送数据包。</p>
<p>当主机号全为 1 时，就表示该网络的广播地址。例如把 <code>172.20.0.0/16</code> 用二进制表示如下：</p>
<p><code>10101100.00010100.00000000.00000000</code></p>
<p>将这个地址的主机部分全部改为 1，则形成广播地址：</p>
<p><code>10101100.00010100.11111111.11111111</code></p>
<p>再将这个地址用十进制表示，则为 <code>172.20.255.255</code> 。</p>
<p>广播地址可以分为<strong>本地广播</strong>和<strong>直接广播</strong>两种。</p>
<p>在本网络内广播的叫做<strong>本地广播</strong>。例如网络地址为 192.168.0.0&#x2F;24 的情况下，广播地址是 192.168.0.255 。因为这个广播地址的 IP 包会被路由器屏蔽，所以不会到达 192.168.0.0&#x2F;24 以外的其他链路上。</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302048652.png" alt="image-20220930204832366" style="zoom:50%;" />

<p>在<strong>不同网络之间的广播叫做直接广播</strong>。例如网络地址为 192.168.0.0&#x2F;24 的主机向 192.168.1.255&#x2F;24 的目标地址发送 IP 包。收到这个包的路由器，将数据转发给192.168.1.0&#x2F;24，从而使得所有192.168.1.1~192.168.1.254 的主机都能收到这个包（<strong>由于直接广播有一定的安全问题，多数情况下会在路由器上设置为不转发</strong>）。</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302054937.png" alt="image-20220930205430651" style="zoom:50%;" />

<ul>
<li>什么是 D、E 类地址？</li>
</ul>
<p>而 D 类和 E 类地址是没有主机号的，所以不可用于主机 IP，D 类常被用于多播，E类是预留的分类，暂时未使用</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302054629.png" alt="image-20220930205451353" style="zoom:50%;" />

<ul>
<li>IP 分类的优点</li>
</ul>
<p>不管是路由器还是主机解析到一个 IP 地址时候，我们判断其 IP 地址的首位是否为0，为 0 则为 A 类地址，那么就能很快的找出网络地址和主机地址。</p>
<p>其余分类判断方式参考如下图：</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302057124.png" alt="image-20220930205727877" style="zoom:50%;" />

<h3 id="公有IP与私有IP地址"><a href="#公有IP与私有IP地址" class="headerlink" title="公有IP与私有IP地址"></a>公有IP与私有IP地址</h3><p>在 A、B、C 分类地址，实际上有分公有 IP 地址和 私有 IP 地址。下图为常见三类内网地址</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302059456.png" alt="image-20220930205906149" style="zoom:50%;" />

<h3 id="IP-地址与路由控制"><a href="#IP-地址与路由控制" class="headerlink" title="IP 地址与路由控制"></a>IP 地址与路由控制</h3><p>IP地址的网络地址这一部分是用于进行路由控制。路由控制表中记录着网络地址与下一步应该发送至路由器的地址，在主机和路由器上都会有各自的路由器控制表。在发送 IP 包时，首先要确定 IP 包首部中的目标地址，再从路由控制表中找到与该地址具有相同网络地址的记录，根据该记录将 IP 包转发给相应的下一个路由器。如果路由控制表中存在多条相同网络地址的记录，就选择相同位数最多的网络地址，也就是最长匹配。</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302100814.png" alt="image-20220930210006507" style="zoom:50%;" />

<ul>
<li>主机 A 要发送一个 IP 包，其源地址是 10.1.1.30 和目标地址是 10.1.2.10 ，由于没有在主机 A 的路由表找到与目标地址 10.1.2.10 的网络地址，于是把包被转发到默认路由（路由器 1 ）</li>
</ul>
<p><strong>注意：</strong></p>
<blockquote>
<p>在主机A的路由表中，有一条0.0.0.0&#x2F;0表示，如果在此表中找不到匹配项，就将所有的ip转发的10.1.1.1默认网关（也就是路由器1）去查找</p>
<ul>
<li>路由器 1 收到 IP 包后，也在路由器 1 的路由表匹配与目标地址相同的网络地址记录，发现匹配到了，于是就把 IP 数据包转发到了 10.1.0.2 这台路由器 2</li>
<li>路由器 2 收到后，同样对比自身的路由表，发现匹配到了，于是把 IP 包从路由器 2 的 10.1.2.1 这个接口出去，最终经过交换机把 IP 数据包转发到了目标主机</li>
</ul>
</blockquote>
<h3 id="环回地址是不会流向网络"><a href="#环回地址是不会流向网络" class="headerlink" title="环回地址是不会流向网络"></a>环回地址是不会流向网络</h3><p>环回地址是在同一台计算机上的程序之间进行网络通信时所使用的一个默认地址。计算机使用一个特殊的 IP 地址 127.0.0.1 作为环回地址，与该地址具有相同意义的是一个叫做 localhost 的主机名。使用这个 IP 或主机名时，数据包不会流向网络。</p>
<h1 id="IP-协议相关技术"><a href="#IP-协议相关技术" class="headerlink" title="IP 协议相关技术"></a>IP 协议相关技术</h1><p>跟 IP 协议相关的技术也不少，接下来说说与 IP 协议相关的重要且常见的技术。</p>
<ul>
<li>DNS 域名解析</li>
<li>ARP 与 RARP 协议</li>
<li>DHCP 动态获取 IP 地址</li>
<li>NAT 网络地址转换</li>
<li>ICMP 互联网控制报文协议</li>
</ul>
<h2 id="DNS-域名解析"><a href="#DNS-域名解析" class="headerlink" title="DNS 域名解析"></a>DNS 域名解析</h2><p>我们在上网的时候，通常使用的方式域名，而不是 IP 地址，因为域名方便人类记忆。那么实现这一技术的就是 DNS 域名解析，DNS 可以将域名网址自动转换为具体的 IP地址。</p>
<p>对于每一级域名长度的限制是63个字符，域名总长度则不能超过253个字符。</p>
<h3 id="域名的层级关系"><a href="#域名的层级关系" class="headerlink" title="域名的层级关系"></a>域名的层级关系</h3><p>DNS 中的域名都是用句点来分隔的，比如 <a target="_blank" rel="noopener" href="http://www.server.com/">www.server.com</a> ，这里的句点代表了不同层次之间的界限。在域名中，越靠右的位置表示其层级越高。</p>
<p>毕竟域名是外国人发明，所以思维和中国人相反，比如说一个城市地点的时候，外国喜欢从小到大的方式顺序说起（如 XX 街道 XX 区 XX 市 XX 省），而中国则喜欢从大到小的顺序（如 XX 省 XX 市 XX 区 XX 街道）。</p>
<p>根域是在最顶层，它的下一层就是 com 顶级域，再下面是 server.com。所以域名的层级关系类似一个树状结构：</p>
<ul>
<li>根 DNS 服务器</li>
<li>顶级域 DNS 服务器（com）</li>
<li>权威 DNS 服务器（server.com）</li>
</ul>
<p>根域的 DNS 服务器信息保存在互联网中所有的 DNS 服务器中。这样一来，任何DNS 服务器就都可以找到并访问根域 DNS 服务器了。</p>
<p>因此，客户端只要能够找到任意一台 DNS 服务器，就可以通过它找到根域 DNS 服务器，然后再一路顺藤摸瓜找到位于下层的某台目标 DNS 服务器。</p>
<h3 id="域名解析的工作流程"><a href="#域名解析的工作流程" class="headerlink" title="域名解析的工作流程"></a>域名解析的工作流程</h3><blockquote>
<ol>
<li>-<a href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%BA%94%E7%94%A8%E5%B1%82/DNS/%E6%B5%8F%E8%A7%88%E5%99%A8DNS%E7%BC%93%E5%AD%98.html" title="浏览器DNS缓存">浏览器DNS缓存</a></li>
<li>-<a href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%BA%94%E7%94%A8%E5%B1%82/DNS/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9FDNS%E7%BC%93%E5%AD%98.html" title="操作系统DNS缓存">操作系统DNS缓存</a></li>
<li>-<a href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%BA%94%E7%94%A8%E5%B1%82/DNS/%E6%9C%AC%E6%9C%BA%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E6%96%87%E4%BB%B6-hosts.html" title="本机域名解析文件 hosts">本机域名解析文件 hosts</a></li>
<li>-路由器DNS缓存</li>
<li>-ISP DNS 缓存</li>
<li>-递归搜索</li>
</ol>
</blockquote>
<p>浏览器首先看一下自己的缓存里有没有，如果没有就向操作系统的缓存要，还没有就检查本机域名解析文件 hosts ，如果还是没有，就会 DNS 服务器进行查询，查询的过程如下：（迭代查询）</p>
<blockquote>
<ol>
<li><p>本地的DNS客户端首先会发出一个 DNS 请求，问 <a target="_blank" rel="noopener" href="http://www.server.com/">www.server.com</a> 的 IP 是啥，并发给本地 DNS 服务器（也就是客户端的 TCP&#x2F;IP 设置中填写的 DNS 服务器地址）。</p>
</li>
<li><p>本地域名服务器收到客户端的请求后，如果缓存里的表格能找到www.server.com，则它直接返回 IP 地址。如果没有，本地 DNS 会去问它的根域名服务器：“老大， 能告诉我 <a target="_blank" rel="noopener" href="http://www.server.com/">www.server.com</a> 的 IP 地址吗？” 根域名服务器是最高层次的，它不直接用于域名解析，但能指明一条道路。</p>
</li>
<li><p>根 DNS 收到来自本地 DNS 的请求后，发现后置是 .com，说：“<a target="_blank" rel="noopener" href="http://www.server.com/">www.server.com</a> 这个域名归 .com 区域管理”，我给你 .com 顶级域名服务器地址给你，你去问问它吧。”</p>
</li>
<li><p>本地 DNS 收到顶级域名服务器的地址后，发起请求问“老二， 你能告诉我 <a target="_blank" rel="noopener" href="http://www.server.com/">www.server.com</a> 的 IP 地址吗？”</p>
</li>
<li><p>顶级域名服务器说：“我给你负责 <a target="_blank" rel="noopener" href="http://www.server.com/">www.server.com</a> 区域的权威 DNS 服务器的地址，你去问它应该能问到”。</p>
</li>
<li><p>本地 DNS 于是转向问权威 DNS 服务器：“老三，<a href="http://www.server.com对应的IP是啥呀？”">www.server.com对应的IP是啥呀？”</a> server.com 的权威 DNS 服务器，它是域名解析结果的原出处。为啥叫权威呢？就是我的域名我做主。</p>
</li>
<li><p>权威 DNS 服务器查询后将对应的 IP 地址 X.X.X.X 告诉本地 DNS。</p>
</li>
<li><p>本地 DNS 再将 IP 地址返回客户端，客户端和目标建立连接。</p>
</li>
</ol>
</blockquote>
<p>至此，我们完成了 DNS 的解析过程。现在总结一下，整个过程我画成了一个图。</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302157697.png" alt="image-20220930215718319" style="zoom:50%;" />

<h3 id="常见DNS服务器"><a href="#常见DNS服务器" class="headerlink" title="常见DNS服务器"></a><a href="https://11pmsleep.github.io/2022-09-22-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%BA%94%E7%94%A8%E5%B1%82/DNS/">常见DNS服务器</a></h3><blockquote>
<p>见链接</p>
</blockquote>
<h2 id="ARP-与-RARP-协议"><a href="#ARP-与-RARP-协议" class="headerlink" title="ARP 与 RARP 协议"></a>ARP 与 RARP 协议</h2><p>在传输一个 IP 数据报的时候，确定了源 IP 地址和目标 IP 地址后，就会通过主机「路由表」确定 IP 数据包下一跳。然而，网络层的下一层是数据链路层，所以我们还要知道「下一跳」的 MAC 地址。</p>
<p>由于主机的路由表中可以找到下一条的 IP 地址，所以可以通过 ARP 协议，<strong>求得下一跳的 MAC 地址</strong>。</p>
<h3 id="那么-ARP-又是如何知道对方-MAC-地址的呢？"><a href="#那么-ARP-又是如何知道对方-MAC-地址的呢？" class="headerlink" title="那么 ARP 又是如何知道对方 MAC 地址的呢？"></a>那么 ARP 又是如何知道对方 MAC 地址的呢？</h3><p>简单地说，ARP 是借助 <strong>ARP 请求</strong>与 <strong>ARP 响应</strong>两种类型的包确定 MAC 地址的。</p>
<ul>
<li><p>主机会通过<strong>广播</strong>发送 <strong>ARP 请求</strong>，这个包中包含了想要知道的 <strong>MAC 地址的主机IP 地址</strong>。</p>
</li>
<li><p>当同个链路中的所有设备收到 ARP 请求时，会去拆开 ARP 请求包里的内容，<strong>如果 ARP 请求包中的目标 IP 地址与自己的 IP 地址一致</strong>，那么这个设备就将自己的MAC 地址塞入 ARP 响应包返回给主机。</p>
</li>
</ul>
<p>操作系统通常会把第一次通过 ARP 获取的 MAC 地址缓存起来，以便下次直接从缓存中找到对应 IP 地址的 MAC 地址。不过，MAC 地址的缓存是有一定期限的，超过这个期限，缓存的内容将被清除。</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302159684.png" alt="image-20220930215958290" style="zoom:50%;" />

<h3 id="RARP-协议你知道是什么吗？"><a href="#RARP-协议你知道是什么吗？" class="headerlink" title="RARP 协议你知道是什么吗？"></a>RARP 协议你知道是什么吗？</h3><p>ARP 协议是已知 IP 地址 求 MAC 地址，那 RARP 协议正好相反。</p>
<p>它是已知 MAC 地址求 IP 地址。例如将<strong>打印机服务器等小型嵌入式设备</strong>接入到网络时就经常会用得到。通常这需要架设一台 <strong>RARP 服务器</strong>，在这个服务器上<strong>注册设备的 MAC 地址及其 IP地址</strong>。然后再将这个设备接入到网络，接着：</p>
<ul>
<li>该设备会发送一条「我的 MAC 地址是XXXX，请告诉我，我的IP地址应该是什么」的请求信息。</li>
<li>RARP 服务器接到这个消息后返回「MAC地址为 XXXX 的设备，IP地址为 XXXX」的信息给这个设备。</li>
</ul>
<p>最后，设备就根据从 RARP 服务器所收到的应答信息设置自己的 IP 地址。</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302201834.png" alt="image-20220930220133582" style="zoom:50%;" />

<h2 id="DHCP-动态获取-IP-地址"><a href="#DHCP-动态获取-IP-地址" class="headerlink" title="DHCP 动态获取 IP 地址"></a>DHCP 动态获取 IP 地址</h2><p>DHCP 在生活中我们是很常见的了，我们的电脑通常都是通过 DHCP 动态获取 IP 地址，大大省去了配 IP 信息繁琐的过程。接下来，我们来看看我们的电脑是如何通过 4 个步骤的过程，获取到 IP 的。</p>
<h3 id="DHCP-工作流程"><a href="#DHCP-工作流程" class="headerlink" title="DHCP 工作流程"></a>DHCP 工作流程</h3><img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302211280.png" alt="image-20220930221145961" style="zoom:50%;" />

<p>DHCP 交互的 4 个步骤：</p>
<blockquote>
<ul>
<li><p>客户端首先发起 DHCP 发现报文（DHCP DISCOVER） 的 IP 数据报，由于客户端没有 IP 地址，也不知道 DHCP 服务器的地址，所以使用的是 UDP 广播通信，其使用的广播目的地址是 255.255.255.255（端口 67） 并且使用 0.0.0.0（端口 68） 作为源 IP 地址。DHCP 客户端将该 IP 数据报传递给链路层，链路层然后将帧广播到所有的网络中设备。</p>
</li>
<li><p>DHCP 服务器收到 DHCP 发现报文时，用 DHCP 提供报文（DHCP OFFER） 向客户端做出响应。该报文仍然使用 IP 广播地址 255.255.255.255，该报文信息携带服务器提供可租约的 IP 地址、子网掩码、默认网关、DNS 服务器以及 IP 地址租用期。</p>
</li>
<li><p>客户端收到一个或多个服务器的 DHCP 提供报文后，从中选择一个服务器，并向选中的服务器发送 DHCP 请求报文（DHCP REQUEST进行响应，回显配置的参数。</p>
</li>
<li><p>最后，服务端用 DHCP ACK 报文对 DHCP 请求报文进行响应，应答所要求的参数。</p>
</li>
</ul>
</blockquote>
<p>一旦客户端收到 DHCP ACK 后，交互便完成了，并且客户端能够在租用期内使用DHCP 服务器分配的 IP 地址。</p>
<p>如果租约的 DHCP IP 地址快期后，客户端会向服务器发送 DHCP 请求报文：</p>
<blockquote>
<ul>
<li>服务器如果同意继续租用，则用 DHCP ACK 报文进行应答，客户端就会延长租期。</li>
<li>服务器如果不同意继续租用，则用 DHCP NACK 报文，客户端就要停止使用租约的 IP 地址。</li>
</ul>
</blockquote>
<p>可以发现，DHCP 交互中，全程都是使用 UDP 广播通信。</p>
<p><strong>咦，用的是广播，那如果 DHCP 服务器和客户端不是在同一个局域网内，路由器又不会转发广播包，那不是每个网络都要配一个 DHCP 服务器？</strong></p>
<p>所以，为了解决这一问题，就出现了 DHCP 中继代理。</p>
<p>有了 DHCP 中继代理以后，对不同网段的 IP 地址分配也可以由一个 DHCP 服务器统一进行管理。</p>
<blockquote>
<ul>
<li><p>DHCP 客户端会向 DHCP 中继代理发送 DHCP 请求包，而 DHCP 中继代理在收到这个广播包以后，再以单播的形式发给 DHCP 服务器。</p>
</li>
<li><p>服务器端收到该包以后再向 DHCP 中继代理返回应答，并由 DHCP 中继代理将此包转发给 DHCP 客户端</p>
</li>
</ul>
</blockquote>
<p>因此，DHCP 服务器即使不在同一个链路上也可以实现统一分配和管理IP地址。</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302213176.png" alt="image-20220930221354860" style="zoom:50%;" />

<h2 id="NAT-网络地址转换"><a href="#NAT-网络地址转换" class="headerlink" title="NAT 网络地址转换"></a>NAT 网络地址转换</h2><p>私有 IP 地址转换成公有 IP 地址私有 IP 地址转换成公有 IP 地址</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302214001.png" alt="image-20220930221414766" style="zoom:50%;" />

<p><strong>那不是 N 个 私有 IP 地址，你就要 N 个公有 IP 地址？这怎么就缓解了 IPv4 地址耗尽的问题？这不瞎扯吗？</strong></p>
<p>确实是，普通的 NAT 转换没什么意义。由于绝大多数的网络应用都是使用传输层协议 TCP 或 UDP 来传输数据的。因此，可以把 IP 地址 + 端口号一起进行转换。这样，就用一个全球 IP 地址就可以了，这种转换技术就叫网络地址与端口转换NAPT。很抽象？来，看下面的图解就能瞬间明白了</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302214313.png" alt="image-20220930221438973" style="zoom:50%;" />

<p>图中有两个客户端 192.168.1.10 和 192.168.1.11 同时与服务器183.232.231.172进行通信，并且这两个客户端的本地端口都是 1025。</p>
<p>此时，两个私有 IP 地址都转换 IP 地址为公有地址 120.229.175.121，但是以不同的端口号作为区分。于是，生成一个 NAPT 路由器的转换表，就可以正确地转换地址跟端口的组合，令客户端 A、B 能同时与服务器之间进行通信。这种转换表在 NAT 路由器上自动生成。例如，在 TCP 的情况下，建立 TCP 连接首次握手时的 SYN 包一经发出，就会生成这个表。而后又随着收到关闭连接时发出FIN 包的确认应答从表中被删除。</p>
<h2 id="ICMP-互联网控制报文协议"><a href="#ICMP-互联网控制报文协议" class="headerlink" title="ICMP 互联网控制报文协议"></a>ICMP 互联网控制报文协议</h2><p>ICMP 全称是 Internet Control Message Protocol，也就是互联网控制报文协议。里面有个关键词 —— 控制，如何控制的呢？</p>
<p>网络包在复杂的网络传输环境里，常常会遇到各种问题。当遇到问题的时候，总不能死个不明不白，没头没脑的作风不是计算机网络的风格。所以需要传出消息，报告遇到了什么问题，这样才可以调整传输策略，以此来控制整个局面。</p>
<h3 id="ICMP-功能都有啥？"><a href="#ICMP-功能都有啥？" class="headerlink" title="ICMP 功能都有啥？"></a>ICMP 功能都有啥？</h3><p>ICMP 主要的功能包括：确认 IP 包是否成功送达目标地址、报告发送过程中 IP 包被废弃的原因和改善网络设置等。在 IP 通信中如果某个 IP 包因为某种原因未能达到目标地址，那么这个具体的原因将由 ICMP 负责通知。</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302215666.png" alt="image-20220930221509410" style="zoom:50%;" />

<p>如上图例子，主机 A 向主机 B 发送了数据包，由于某种原因，途中的路由器 2 未能发现主机 B 的存在，这时，路由器 2 就会向主机 A 发送一个 ICMP 目标不可达数据包，说明发往主机 B 的包未能成功。</p>
<p>ICMP 的这种通知消息会使用 IP 进行发送 。</p>
<p>因此，从路由器 2 返回的 ICMP 包会按照往常的路由控制先经过路由器 1 再转发给主机 A 。收到该 ICMP 包的主机 A 则分解 ICMP 的首部和数据域以后得知具体发生问题的原因。</p>
<h3 id="ICMP-大致可以分为两大类："><a href="#ICMP-大致可以分为两大类：" class="headerlink" title="ICMP 大致可以分为两大类："></a>ICMP 大致可以分为两大类：</h3><ul>
<li>一类是用于诊断的查询消息，也就是「查询报文类型」</li>
<li>另一类是通知出错原因的错误消息，也就是「差错报文类型」</li>
</ul>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202210010050020.png" alt="image-20220930221913629" style="zoom:50%;" />

<h1 id="统一资源定位符（URL）和统一资源标志符-URI"><a href="#统一资源定位符（URL）和统一资源标志符-URI" class="headerlink" title="统一资源定位符（URL）和统一资源标志符(URI)"></a>统一资源定位符（URL）和统一资源标志符(URI)</h1><h2 id="统一资源定位符（URL）"><a href="#统一资源定位符（URL）" class="headerlink" title="统一资源定位符（URL）"></a>统一资源定位符（URL）</h2><p>URL 遵守一种标准的语法，它由协议、主机名、域名、端口、路径、以及文件名这六个部分构成，其中端口可以省略。具体语法规则如下，例如：</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol?id=123#HTTP/1.1_response_messages">https://en.wikipedia.org:443/wiki/Hypertext_Transfer_Protocol?id=123#HTTP/1.1_response_messages</a></p>
</blockquote>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">protocol:[//[user[:password]@]host[:port]][/path][?query][#fragment]</span><br><span class="line">[协议名]://[用户名]:[密码]@[主机名]:[端口]/[路径]?[查询参数]#[片段ID]</span><br><span class="line">protocol：指定使用的传输协议，最常用的是通过 HTTP/HTTPS 协议来定位网络资源。</span><br><span class="line">          mailto: 用户打开邮箱的客户端</span><br><span class="line">          ftp: 用来做文件的转换</span><br><span class="line">          file: 用来获取文件</span><br><span class="line">user:password 需要认证后才能访问时的账号密码。</span><br><span class="line">host：表示合法的因特网主机域名或者IP地址。</span><br><span class="line">port：用于表示在传输层上交换信息的进程端口号，标明了获取服务器资源的入口,http协议默认端口号为80，不同的协议默认端口号不同。</span><br><span class="line">path：指定请求服务器上资源的路径。</span><br><span class="line">?query：可选，用于给动态网页传递参数，可以有多个参数，用&quot;&amp;&quot;符号隔开，每个参数的键值之间用&quot;=&quot;隔开。</span><br><span class="line">#fragment：信息片断字符串，用于指定网络资源中的片断。例如一个网页中有多个名词解释，可使用fragment直接定位到某一名词解释。也就是常指的锚点，定位到网页的某一位置。</span><br></pre></td></tr></table></figure>

<h2 id="统一资源标志符-URI"><a href="#统一资源标志符-URI" class="headerlink" title="统一资源标志符(URI)"></a>统一资源标志符(URI)</h2><p><img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302224877.png" alt="image-20220930222414559"></p>
<p>URI： Universal Resource Identifier 统一资源标志符，用来标识抽象或物理资源的一个紧凑字符串。</p>
<p>HTTP是基于客户端&#x2F;服务端（C&#x2F;S）的架构模型，通过一个可靠的链接来交换信息，是一个无状态的请求&#x2F;响应协议。</p>
<p>HTTP使用统一资源标识符（URI）来传输数据和建立连接。</p>
<p>URI和URL的区别：URL是URI的一个子集</p>
<p>URN： Universal Resource Name 统一资源名称，通过特定命名空间中的唯一名称或ID来标识资源。</p>
<p>URI可被视为定位符（URL），名称（URN）或两者兼备。统一资源名（URN）如同一个人的名称，而统一资源定位符（URL）代表一个人的住址。换言之，URN定义某事物的身份，而URL提供查找该事物的方法。</p>
<h1 id="HTTP基础知识"><a href="#HTTP基础知识" class="headerlink" title="HTTP基础知识"></a>HTTP基础知识</h1><h2 id="HTTP是什么"><a href="#HTTP是什么" class="headerlink" title="HTTP是什么"></a>HTTP是什么</h2><p>HTTP 是超文本传输协议，也就是HyperText Transfer Protocol。是一种用于分布式、协作式和超媒体信息系统的应用层协议。是一个基于请求与响应，无状态的，应用层的协议，常基于 TCP&#x2F;IP 协议传输数据，互联网上应用最为广泛的一种网络协议,所有的互联网文件都必须遵守这个标准。</p>
<p>HTTP的名字「超文本协议传输」，它可以拆成三个部分：</p>
<h3 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h3><p>HTTP 是一个用在计算机世界里的协议。它使用计算机能够理解的语言确立了一种计算机之间交流通信的规范（两个以上的参与者），以及相关的各种控制和错误处理方式（行为约定和规范）。</p>
<h3 id="传输"><a href="#传输" class="headerlink" title="传输"></a>传输</h3><p>就是把一堆东西从 A 点搬到 B 点，或者从 B 点 搬到 A 点。HTTP 协议是一个双向协议。HTTP 是一个在计算机世界里专门用来在两点之间传输数据的约定和规范。我们在上网冲浪时，浏览器是请求方 A ，百度网站就是应答方 B。双方约定用 HTTP协议来通信，于是浏览器把请求数据发送给网站，网站再把一些数据返回给浏览器，最后由浏览器渲染在屏幕，就可以看到图片、视频了。</p>
<h3 id="超文本"><a href="#超文本" class="headerlink" title="超文本"></a>超文本</h3><p>HTTP 传输的内容是「超文本」「文本」，在互联网早期的时候只是简单的字符文字，但现在「文本」。的涵义已经可以扩展为图片、视频、压缩包等，在 HTTP 眼里这些都算做「文本」。「超文本」，它就是超越了普通文本的文本，它是文字、图片、视频等的混合体，最关键有超链接，能从一个超文本跳转到另外一个超文本。HTML 就是最常见的超文本了，它本身只是纯文字文件，但内部用很多标签定义了图片、视频等的链接，在经过浏览器的解释，呈现给我们的就是一个文字、有画面的网页了。</p>
<h2 id="HTTP客户端请求消息"><a href="#HTTP客户端请求消息" class="headerlink" title="HTTP客户端请求消息"></a>HTTP客户端请求消息</h2><img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202210010050021.png" alt="image-20220930222926720" style="zoom:50%;" />

<p>HTTP请求报文：web客户端向服务器发送的请求</p>
<p>HTTP请求由四个部分组成：</p>
<blockquote>
<ul>
<li>请求行</li>
<li>请求头部</li>
<li>空行</li>
<li>请求正文</li>
</ul>
</blockquote>
<h3 id="请求行"><a href="#请求行" class="headerlink" title="请求行"></a>请求行</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Method Request-URI HTTP-Version CRLF</span><br><span class="line">Method：表示请求方法;</span><br><span class="line">Request-URI：是一个统一资源标识符;</span><br><span class="line">HTTP-Version：表示请求的HTTP协议版本;</span><br><span class="line">CRLF：表示回车和换行\r\n表示回车换行    CR(Carriage Return) 代表回车，对应字符&#x27;\r&#x27;；LF(Line Feed) 代表换行，对应字符&#x27;\n&#x27;</span><br><span class="line">除了作为结尾的CRLF外，不允许出现单独的CR或LF字符</span><br></pre></td></tr></table></figure>

<h4 id="请求方法"><a href="#请求方法" class="headerlink" title="请求方法"></a>请求方法</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">HTTP1.0 定义了三种请求方法： GET, POST 和 HEAD方法。 </span><br><span class="line">HTTP1.1 新增了六种请求方法：OPTIONS、PUT、PATCH、DELETE、TRACE 和 </span><br><span class="line">CONNECT 方法。</span><br><span class="line"></span><br><span class="line">GET 请求获取Request-URI所标识的资源</span><br><span class="line">POST 在Request-URI所标识的资源后附加新的数据</span><br><span class="line">HEAD 请求获取由Request-URI所标识的资源的响应消息报头</span><br><span class="line">PUT 请求服务器存储一个资源，并用Request-URI作为其标识</span><br><span class="line">DELETE 请求服务器删除Request-URI所标识的资源</span><br><span class="line">TRACE 请求服务器回送收到的请求信息，主要用于测试或诊断</span><br><span class="line">OPTIONS 请求查询服务器的性能，或者查询与资源相关的选项和需求</span><br><span class="line">CONNECT 保留将来使用，HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器</span><br><span class="line">PATCH 用于将局部修改应用到资源。（由 RFC 5789 指定的方法）</span><br></pre></td></tr></table></figure>

<h3 id="请求头部字段"><a href="#请求头部字段" class="headerlink" title="请求头部字段"></a>请求头部字段</h3><p>由关键字&#x2F;值对组成，每行一对，关键字和值用冒号分享。请求头标通知服务器腾于客户端的功能和标识。</p>
<blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers">http_header有哪些头部:</a></li>
<li><a target="_blank" rel="noopener" href="http://tools.jb51.net/table/http_content_type">content-type头部有哪些值：</a></li>
</ul>
</blockquote>
<p>请求头部字段：（Request Header Fields）允许客户端传递关于自身的信息和希望的响应形式。</p>
<p>在HTTP&#x2F;1.1协议中，所有的请求头，除Host外，都是可选的。注意useragent，accept，origin等字段</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Header：Header_Value CRLF //注意冒号后面和头部值之间有一个空格</span><br></pre></td></tr></table></figure>

<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302231325.png" alt="image-20220930223149959" style="zoom:50%;" />

<h4 id="Host："><a href="#Host：" class="headerlink" title="Host："></a>Host：</h4><blockquote>
<p>客户端发送请求时，用来指定服务器的域名。有了 Host 字段，就可以将请求发往「同一台」服务器上的不同网站。</p>
<p><code>Host: www.A.com</code></p>
</blockquote>
<h4 id="Content-Length："><a href="#Content-Length：" class="headerlink" title="Content-Length："></a>Content-Length：</h4><blockquote>
<p>服务器在返回数据时，会有 Content-Length 字段，表明本次回应的数据长度。</p>
<p><code>Content-Length: 1000</code> 如上面则是告诉浏览器，本次服务器回应的数据长度是 1000 个字节，如果还有更多的数据在后面，那就 属于下一个回应了。</p>
</blockquote>
<h4 id="Connection：Connection"><a href="#Connection：Connection" class="headerlink" title="Connection：Connection"></a>Connection：Connection</h4><blockquote>
<p>字段最常用于客户端要求服务器使用 TCP 持久连接，以便其他请求复用。HTTP&#x2F;1.1 版本的默认连接都是持久连接，但为了兼容老版本的 HTTP，需要指定Connection 首部字段的值为 Keep-Alive 。一个可以复用的 TCP 连接就建立了，直到客户端或服务器主动关闭连接。但是，这不是标准字段。</p>
<p><code>Connection: keep-alive</code></p>
</blockquote>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302234096.png" alt="image-20220930223406787" style="zoom: 33%;" />

<h4 id="Content-Type："><a href="#Content-Type：" class="headerlink" title="Content-Type："></a>Content-Type：</h4><blockquote>
<p>Content-Type 字段用于服务器回应时，告诉客户端，本次数据是什么格式。用来表名 request 的内容类型。可以用 HttpServletRequest 的 getContentType()方法取得。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Content-Type: text/html; charset=utf-8 </span><br><span class="line">//上面的类型表明，发送的是网页，而且编码是UTF-8。</span><br></pre></td></tr></table></figure>

<h4 id="Accept"><a href="#Accept" class="headerlink" title="Accept :"></a>Accept :</h4><blockquote>
<p>客户端请求的时候，可以使用 Accept 字段声明自己可以接受哪些数据格式。指浏览器或其他客户可以接爱的 MIME 文件格式。Servlet 可以根据它判断并返回适当的文件格式。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Accept: \*/\* </span><br><span class="line">//上面代码中，客户端声明自己可以接受任何格式的数据。</span><br></pre></td></tr></table></figure>

<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302236496.png" alt="image-20220930223617469" style="zoom:50%;" />

<h4 id="Content-Encoding"><a href="#Content-Encoding" class="headerlink" title="Content-Encoding:"></a>Content-Encoding:</h4><blockquote>
<p>Content-Encoding 字段说明数据的压缩方法。表示服务器返回的数据使用了什么压缩格式</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Content-Encoding: gzip </span><br><span class="line">//上面表示服务器返回的数据采用了 gzip 方式压缩，告知客户端需要用此方式解压。</span><br></pre></td></tr></table></figure>

<h4 id="Accept-Encoding"><a href="#Accept-Encoding" class="headerlink" title="Accept-Encoding:"></a>Accept-Encoding:</h4><p>客户端在请求时，用 Accept-Encoding 字段说明自己可以接受哪些压缩方法。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Accept-Encoding: gzip, deflate</span><br></pre></td></tr></table></figure>

<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302238469.png" alt="image-20220930223747919" style="zoom:50%;" />

<h4 id="Connection："><a href="#Connection：" class="headerlink" title="Connection："></a>Connection：</h4><p>用来告诉服务器是否可以维持固定的 HTTP 连接。http 是无连接的，HTTP&#x2F;1.1 使用 Keep-Alive为默认值，这样，当浏览器需要多个文件时(比如一个 HTML 文件和相关的图形文件)，不需要每次都建立连接</p>
<h4 id="Cookie："><a href="#Cookie：" class="headerlink" title="Cookie："></a>Cookie：</h4><p>浏览器用这个属性向服务器发送 Cookie。Cookie 是在浏览器中寄存的小型数据体，它可以记载和服务器相关的用户信息，也可以用来实现会话功能。</p>
<h4 id="Referer-："><a href="#Referer-：" class="headerlink" title="Referer ："></a>Referer ：</h4><p>表 明 产 生 请 求 的 网 页 URL 。 如 比 从 网 页 <code>/icconcept/index.jsp</code> 中 点 击 一 个 链 接 到 网 页<code>/icwork/search</code> ， 在 向 服 务 器 发 送 的 <code>GET/icwork/search</code> 中 的 请 求 中 ， Referer 是<code>http://hostname:8080/icconcept/index.jsp</code>。这个属性可以用来跟踪 Web 请求是从什么网站来的。</p>
<h3 id="空行"><a href="#空行" class="headerlink" title="空行"></a>空行</h3><blockquote>
<p>表示请求头结束，请求正文（请求体）开始</p>
</blockquote>
<h3 id="请求正文"><a href="#请求正文" class="headerlink" title="请求正文"></a>请求正文</h3><ul>
<li>GET方法：提交数据时，数据参数会作为URL的一部分，放在文件路径后面发送给服务器，被称为查询字符串</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://www.hetianlab.com?username=12345%40qq.com&amp;password=2f7402f......a592b&amp;validateCode=&amp;rtnJson=true</span><br></pre></td></tr></table></figure>

<ul>
<li>POST方法：发送的数据在请求体中</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">username=12345%40qq.com\&amp;password=2f7402f......a592b\&amp;validateCode=\&amp;rtnJson=true</span><br></pre></td></tr></table></figure>

<ul>
<li>URL编码</li>
</ul>
<p>注意%40是URI的编码方式，在burpsuite之中可以用CTRL+SHIFT+U对之进行解码，CTRL+U进行URL编码</p>
<p>合天网安登录界面POST的包</p>
<p>百分号编码又叫做URL编码，是一种编码机制，只要用于URI（包含URL和URN）编码中。</p>
<p>URL中那些字符需要编码，又为什么进行编码?</p>
<p><strong>为什么会需要编码？</strong></p>
<p>那是因为这样东西不适合传输。原因可能有很多种：大小过大，包含隐私数据。对于URL而言，之所以进行编码是因为URL中有一些字符会引起歧义。</p>
<p><strong>例如：</strong>URL参数字符串中使用键值对这样的形式来传参，键值对之间使用了 &amp; 符号分隔。</p>
<p>如果value字符串中包含了 @ 或 &amp; 等字符，那么一定会造成接收URL的服务器解析错误，因此就需要对造成歧义的 @ 和 &amp; 进行转义，对其进行编码。</p>
<p>还有，如果URL的字符集使用的ASCII 码，不是 Unicode，这就意味着不可以在 URL 中包含任何的非 ASCII 码，例如：中文，否则客户端浏览器和服务器设定的字符集不同的情况下，输入的中文就会出现乱码。</p>
<p>百分号编码（URL编码）会对URL不允许出现的字符或者其他特殊情况的允许的字符进行编码，对于被编码的字符，最终会转为百分号 % 开头，后面跟这昂个十六进制数字的形式。例如：空格（SP）是不允许的字符，在ACSII码中对应的的二进制值是 00100000 ，最终转换为 %20。</p>
<p><strong><u>URL编码的原则就是使用安全的字符（没有特殊用途或者特殊意义的可打印字符）去掉那些不安全的字符，以保证内容的正常显示。</u></strong></p>
<h2 id="HTTP服务端响应消息"><a href="#HTTP服务端响应消息" class="headerlink" title="HTTP服务端响应消息"></a>HTTP服务端响应消息</h2><p>HTTP响应报文：在接收和解释请求消息后，服务器返回一个HTTP响应消息。HTTP响应也由四个部分组成，分别是：</p>
<blockquote>
<ul>
<li>状态行</li>
<li>消息报头(响应报头字段）</li>
<li>空行</li>
<li>响应正文</li>
</ul>
</blockquote>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302343948.png" alt="image-20220930234347580" style="zoom:50%;" />

<h3 id="状态行"><a href="#状态行" class="headerlink" title="状态行"></a>状态行</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">HTTP-Version Status-Code Reason-Phrase CRLF</span><br><span class="line">HTTP-Version：表示服务器HTTP协议的版本；</span><br><span class="line">Status-Code：表示服务器发回的响应状态代码；</span><br><span class="line">Reason-Phrase：表示状态代码的文本描述。</span><br></pre></td></tr></table></figure>

<h3 id="状态码"><a href="#状态码" class="headerlink" title="状态码"></a>状态码</h3><blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.runoob.com/http/http-status-codes.html">https://www.runoob.com/http/http-status-codes.html</a></li>
<li><a target="_blank" rel="noopener" href="http://tools.jb51.net/table/http_status_code">http://tools.jb51.net/table/http_status_code</a></li>
</ul>
</blockquote>
<p>五大类HTTP状态码</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302344363.png" alt="image-20220930234436057" style="zoom:50%;" />

<blockquote>
<p>1xx  类状态码属于提示信息，是协议处理中的一种中间状态，实际用到的比较少。<strong>表示信息，请求收到，继续处理</strong></p>
<p>2xx  类状态码表示服务器成功处理了客户端的请求，也是我们最愿意看到的状态。<strong>表示成功，行为被成功地接受、理解和采纳</strong></p>
<blockquote>
<ul>
<li>「200 OK」是最常见的成功状态码，表示一切正常。如果是非 HEAD  请求，服务器返回的响应头都会有 body 数据。</li>
<li>「204 No Content」也是常见的成功状态码，与 200 OK 基本相同，但响应头没有body 数据。</li>
<li>「206 Partial Content」是应用于 HTTP 分块下载或断电续传，表示响应返回的body 数据并不是资源的全部，而是其中的一部分，也是服务器处理成功的状态。</li>
</ul>
</blockquote>
<p>3xx  类状态码表示客户端请求的资源发送了变动，需要客户端用新的 URL 重新发送请求获取资源，也就是重定向。<strong>表示重定向，为了完成请求，必须进一步执行的动作</strong></p>
<blockquote>
<ul>
<li>「301 Moved Permanently」表示永久重定向，说明请求的资源已经不存在了，需改用新的 URL 再次访问。</li>
<li>「302 Moved Permanently」表示临时重定向，说明请求的资源还在，但暂时需要用另一个 URL 来访问。</li>
<li>301 和 302 都会在响应头里使用字段 Location ，指明后续要跳转的 URL，浏览器会自动重定向新的 URL。</li>
<li>「304 Not Modified」不具有跳转的含义，表示资源未修改，重定向已存在的缓冲文件，也称缓存重定向，用于缓存控制。</li>
</ul>
</blockquote>
<p>4xx  类状态码表示客户端发送的报文有误，服务器无法处理，也就是错误码的含义。</p>
<blockquote>
<ul>
<li>「400 Bad Request」表示客户端请求的报文有错误，但只是个笼统的错误。</li>
<li>「403 Forbidden」表示服务器禁止访问资源，并不是客户端的请求出错。</li>
<li>「404 Not Found」表示请求的资源在服务器上不存在或未找到，所以无法提供给客户端。</li>
</ul>
</blockquote>
<p>5xx  类状态码表示客户端请求报文正确，但是服务器处理时内部发生了错误，属于服务器端的错误码。</p>
<blockquote>
<ul>
<li>「500 Internal Server Error」与 400 类似，是个笼统通用的错误码，服务器发生了什么错误，我们并不知道。</li>
<li>「501 Not Implemented」表示客户端请求的功能还不支持，类似“即将开业，敬请期待”的意思。</li>
<li>「502 Bad Gateway」通常是服务器作为网关或代理时返回的错误码，表示服务器自身工作正常，访问后端服务器发生了错误。</li>
<li>「503 Service Unavailable」表示服务器当前很忙，暂时无法响应服务器，类似“网络服务正忙，请稍后重试”的意思。</li>
</ul>
</blockquote>
</blockquote>
<h4 id="几个比较重要的状态码："><a href="#几个比较重要的状态码：" class="headerlink" title="几个比较重要的状态码："></a><strong>几个比较重要的状态码：</strong></h4><blockquote>
<ul>
<li>200：存在文件</li>
<li>403：存在文件夹</li>
<li>3xx：均可能存在</li>
<li>404：不存在文件及文件夹</li>
<li>500：均可能存在</li>
</ul>
</blockquote>
<h3 id="响应头部字段"><a href="#响应头部字段" class="headerlink" title="响应头部字段"></a>响应头部字段</h3><p>响应头部字段（Response Header Fields）：</p>
<p>响应报头<strong>允许服务器传递不能放在状态行中的附加响应信息，以及关于服务器的信息和对 Request-URI 所标识的资源进行下一步访问的信息</strong>。</p>
<p>常见头部：</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302345624.png" alt="image-20220930234527221" style="zoom: 33%;" />

<p>注意：</p>
<blockquote>
<ul>
<li>这个表格里面的data应该改为date，是日期</li>
<li>setcookie字段：在用户第一次访问网站后的响应包中，服务器会在setcookie字段返回给客户一个cookie，以此来表示此后每一次访问用户的身份。</li>
</ul>
</blockquote>
<h4 id="X-Real-IP-与-X-Forwarded-For-与-Remote-Address"><a href="#X-Real-IP-与-X-Forwarded-For-与-Remote-Address" class="headerlink" title="X-Real-IP 与 X-Forwarded-For 与 Remote Address"></a>X-Real-IP 与 X-Forwarded-For 与 Remote Address</h4><blockquote>
<blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weiyuefei/article/details/78687545">X-Forwarded-For 和 X-Real-IP 的区别？</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.mazey.net/1575.html">X-Real-IP 与 X-Forwarded-For</a></li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><p>X-Real-IP：从字面看 X-Real-IP 代表的是客户端请求真实的 IP 地址，这个参数没有相关标准规范，如果是直接访问的请求，可能是客户端真实的 IP 地址，但是中间若经过了层层的代理，就是<strong>最后一层代理的 IP 地址</strong>。</p>
</li>
<li><p>X-Forwarded-For 记录着从客户端发起请求后访问过的每一个 IP 地址，当然第一个是发起请求的客户端本身的地址，各 IP 地址间由“英文逗号+空格”(<code>,</code>)分隔。</p>
<p>X-Forwarded-For 请求头格式：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">X-Forwarded-For</span>: <span class="string">client, proxy1, proxy2</span></span><br></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<p><strong>注意到xff是可以伪造IP的</strong>，因此，一般来说，我们要获得客户端地址，直接从 X-Forwarded-For 拿到第一个 IP 地址即可。一般代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">ips</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;X-Forwarded-For&quot;</span>);</span><br><span class="line"><span class="comment">// 从ips中切割出client Ip 略</span></span><br></pre></td></tr></table></figure>

<p>X-Forwarded-For 作为 HTTP 请求的扩展头，在请求的过程中可以被直接的进行修改。正常情况下，我们所获得的 ip 第一部分应该是客户端 IP，但是如果客户端对 X-Forwarded-For 进行了修改，我们仍旧采用以上方法获得客户端 IP，那么客户端 IP 将会是被伪造过的。</p>
<p>可以看到，如果只是简单进行获取，可能造成许多安全问题，尤其对于对 IP 具有较高要求的场景，例如<strong>投票系统</strong>等,可以通过换IP来刷票</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/345273687">X-Forwarded-For 客户端 IP 伪造过程及防范</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/98c08956183d">WEB安全-伪造X-Forwarded-For绕过服务器IP地址过滤</a></p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>Remote Address——与服务器相连的机器的IP</strong></p>
<p>REMOTE_ADDR代表着客户端的IP，但是这个客户端是相对服务器而言的，也就是实际上与服务器相连的机器的IP（建立tcp连接的那个），这个值是不可伪造的，如果没有代理的话，这个值就是用户实际的IP值，有代理的话，用户的请求会经过代理再到服务器，这个时候REMOTE_ADDR会被设置为代理机器的IP值</p>
<p>当你的浏览器访问某个网站时，假设中间没有任何代理，那么网站的web服务器（Nginx，Apache等）就会把remote_addr设为你的机器IP，如果你用了某个代理，那么你的浏览器会先访问这个代理，然后再由这个代理转发到网站，这样web服务器就会把remote_addr设为这台代理机器的IP</p>
<p>Remote Address代表的是当前HTTP请求的远程地址，即HTTP请求的源地址。HTTP协议在三次握手时使用的就是这个Remote Address地址，在发送响应报文时也是使用这个Remote Address地址。因此，如果请求者伪造Remote Address地址，他将无法收到HTTP的响应报文，此时伪造没有任何意义。这也就使得Remote Address默认具有防篡改的功能。</p>
<p>如果Http请求经过代理服务器转发，则这种情况，用户的真实ip会丢失，所以才有了<code>X-Forwarded-For</code>的方式。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/luxiaojun/p/10451860.html">HTTP 请求头中的 Remote_Addr，X-Forwarded-For，X-Real-IP</a></p>
<p><a target="_blank" rel="noopener" href="http://blog.nsfocus.net/user-ip/">【干货分享】<strong>获取用户IP的正确姿势</strong></a></p>
</blockquote>
</blockquote>
<h3 id="空行-1"><a href="#空行-1" class="headerlink" title="空行"></a>空行</h3><blockquote>
<p>表示响应头结束，响应正文（响应体）开始</p>
</blockquote>
<h3 id="响应正文"><a href="#响应正文" class="headerlink" title="响应正文"></a>响应正文</h3><p>服务器返回的资源内容：<strong>关于这个内容是表示什么意思，还需要结合content-type来具体分析</strong>,下面会讲到</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&quot;result&quot;:&quot;success&quot;,&quot;message&quot;\:null&#125;</span><br></pre></td></tr></table></figure>

<h2 id="HTTP请求方法理解"><a href="#HTTP请求方法理解" class="headerlink" title="HTTP请求方法理解"></a>HTTP请求方法理解</h2><h3 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h3><p>Get 方法的含义是请求从服务器获取资源，这个资源可以是静态的文本、页面、图片视频等。</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302346940.png" alt="image-20220930234641598" style="zoom:50%;" />

<p>不包含请求主体</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302346029.png" alt="image-20220930234650693" style="zoom:50%;" />

<h3 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h3><p>POST：向 Request-URI 所标识的资源提交数据，数据就放在请求正文中用于向指定资源发送数据，指定的资源会对数据进行处理，然后将处理结果返回给客户端，一般用于表单提交、文件上传</p>
<h4 id="POST提交数据的几种-Content-Type-："><a href="#POST提交数据的几种-Content-Type-：" class="headerlink" title="POST提交数据的几种 Content-Type ："></a>POST提交数据的几种 Content-Type ：</h4><img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302348085.png" alt="image-20220930234812777" style="zoom:50%;" />

<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u014209205/article/details/81147783">三种常见的http content-type详解</a></p>
<p>application&#x2F;x-www-form-urlencoded ：最常见的 POST 提交数据方式，浏览器支持的原生 form 表单<br>multipart&#x2F;form-data ：这种方式一般用来上传文件。<br>application&#x2F;json ：在响应头中很常见，在请求头中用来告诉服务端消息主体是序列化后的 json 字符串。</p>
</blockquote>
<p>下面具体谈谈这三种提交方式</p>
<h4 id="application-x-www-form-urlencoded"><a href="#application-x-www-form-urlencoded" class="headerlink" title="application/x-www-form-urlencoded"></a><code>application/x-www-form-urlencoded</code></h4><blockquote>
<p>最常见的POST提交数据方式，浏览器支持的原生form表单提交方式</p>
<p>该方式会将表单内的数据转换为键值对，比如,name&#x3D;java&amp;age &#x3D; 23</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302348189.png" alt="image-20220930234824929" style="zoom: 50%;" />
</blockquote>
<h4 id="multipart-form-data"><a href="#multipart-form-data" class="headerlink" title="multipart/form-data"></a><code>multipart/form-data</code></h4><blockquote>
<p>这种方式一般用来上传文件，偶尔上传表单数据键值对，没错这种方式也可以像<code>application/x-www-form-urlencoded</code>那样上传表单数据！</p>
<p>http请求中的multipart&#x2F;form-data,它会<strong>将表单的数据处理为一条消息</strong>，以标签为单元，用分隔符分开。既可以上传键值对，也可以上传文件。当上传的字段是文件时，会有Content-Type来表名文件类型；content-disposition，用来说明字段的一些信息；<br>由于有boundary隔离，所以multipart&#x2F;form-data既可以上传文件，也可以上传键值对，它采用了键值对的方式，所以可以上传多个文件</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202209302348923.png" alt="image-20220930234840576" style="zoom:50%;" />

<h5 id="上图内容细节解释："><a href="#上图内容细节解释：" class="headerlink" title="上图内容细节解释："></a><strong>上图内容细节解释：</strong></h5><blockquote>
<ol>
<li><p>客户端生成一个 boundary ，其值是一个很长的字符串， 用于分割不同的字段，为了避免与正 文内容重复，boundary 很长很复杂；</p>
</li>
<li><p>然后 Content-Type 里指明了数据是以 mutipart&#x2F;form-data 来编码，本次请求的 boundary 是什么内容。两个content-type，第一个在头部的告诉客户端我要用表单上传文件，第二个在响应正文中表示上传的文件类型</p>
</li>
<li><p>消息主体里按照字段个数又分为多个结构类似的部分，每部分都是以 —–boundary 开始</p>
</li>
<li><p>紧接着内容描述信息，然后是回车，最后是字段具体内容（文本或二进制）。</p>
</li>
<li><p>如果传输的是文件，还要包含文件名和文件类型信息。</p>
</li>
<li><p>消息主体最后以 ——boundary– 标示结束。</p>
</li>
</ol>
</blockquote>
<h5 id="关于conetnt-disposition的解释："><a href="#关于conetnt-disposition的解释：" class="headerlink" title="关于conetnt-disposition的解释："></a><strong>关于conetnt-disposition的解释：</strong></h5><p><code>conetnt-disposition</code>就是定义文件内容呈现方式，在不同位置有不同的用法具体可参考链接的解释:</p>
<blockquote>
<blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/Winnycatty/article/details/84554487">http上传&#x2F;下载文件时，Content-Disposition的使用</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Disposition">Content-Disposition</a></li>
</ul>
</blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Disposition#%E4%BD%9C%E4%B8%BA%E6%B6%88%E6%81%AF%E4%B8%BB%E4%BD%93%E4%B8%AD%E7%9A%84%E6%B6%88%E6%81%AF%E5%A4%B4"><strong>作为消息主体中的消息头</strong></a></li>
</ul>
<p>在常规的 HTTP 应答中，Content-Disposition 响应头指示回复的内容该<strong>以何种形式展示</strong>，是以<strong>内联的形式（即网页或者页面的一部分</strong>），还是<strong>以附件的形式下载并保存到本地</strong>。</p>
<p>在 HTTP 场景中，第一个参数或者是 inline（默认值，表示回复中的消息体会<strong>以页面的一部分或者整个页面的形式展示</strong>），或者是 attachment（意味着消息体应该被<strong>下载到本地</strong>；大多数浏览器会呈现一个“保存为”的对话框，将 filename 的值预填为下载后的文件名，假如它存在的话）。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Content-Disposition: inline</span><br><span class="line">Content-Disposition: attachment</span><br><span class="line">Content-Disposition: attachment; filename=&quot;filename.jpg&quot;</span><br></pre></td></tr></table></figure>

<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Disposition#%E4%BD%9C%E4%B8%BAmultipart_body%E4%B8%AD%E7%9A%84%E6%B6%88%E6%81%AF%E5%A4%B4"><strong>作为 multipart body 中的消息头</strong></a></li>
</ul>
<p>在 HTTP 场景中。第一个参数总是固定不变的 form-data；附加的参数不区分大小写，并且拥有参数值，参数名与参数值用等号 (‘&#x3D;’) 连接，参数值用双引号括起来。参数之间用分号 (‘;’) 分隔。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Content-Disposition: form-data</span><br><span class="line">Content-Disposition: form-data; name=&quot;fieldName&quot;</span><br><span class="line">Content-Disposition: form-data; name=&quot;fieldName&quot;; filename=&quot;filename.jpg&quot;</span><br></pre></td></tr></table></figure>

<p>Content-disposition是 MIME 协议的扩展，MIME 协议指示 MIME 用户代理如何显示附加的文件。如图中的，当 Internet Explorer 接收到头时，它会<strong>激活文件下载对话框</strong>，<strong>它的文件名框自动填充了头中指定的文件名</strong>。（请注意，这是设计导致的；无法使用此功能将文档保存到用户的计算机上，而不向用户询问保存位置。）</p>
</blockquote>
</blockquote>
<h4 id="x-www-form-urlencoded-raw"><a href="#x-www-form-urlencoded-raw" class="headerlink" title="x-www-form-urlencoded(raw)"></a><code>x-www-form-urlencoded(raw)</code></h4><blockquote>
<p>可以上传任意格式的文本，可以上传text、json、xml、html等<br>content-type&#x3D; text&#x2F;html（HTML 文档）；text&#x2F;plain（纯文本）；text&#x2F;css（CSS 样式表）；application&#x2F;json (json字符串)</p>
<h5 id="application-json"><a href="#application-json" class="headerlink" title="application/json"></a><code>application/json</code></h5><blockquote>
<p>在响应头中很常见，在请求头中用来告诉服务端消息主体是序列化后的json字符串。</p>
</blockquote>
</blockquote>
<h4 id="application-octet-stream"><a href="#application-octet-stream" class="headerlink" title="application/octet-stream"></a><code>application/octet-stream</code></h4><blockquote>
<p>从字面意思得知，只可以上传二进制数据，通常用来上传文件，由于没有键值，所以，一次只能上传一个文件。</p>
</blockquote>
<h3 id="HEAD"><a href="#HEAD" class="headerlink" title="HEAD"></a>HEAD</h3><blockquote>
<p>HEAD：请求获取由Request-URI所标识的资源的响应消息报头首部，不会返回报文主体</p>
</blockquote>
<p><img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202210010039520.png" alt="image-20221001003809242"></p>
<h3 id="OPTIONS"><a href="#OPTIONS" class="headerlink" title="OPTIONS"></a>OPTIONS</h3><blockquote>
<p>OPTIONS：查询资源支持的方法。</p>
</blockquote>
<p><img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202210010048426.png" alt="image-20221001004812048"></p>
<h3 id="PUT"><a href="#PUT" class="headerlink" title="PUT"></a>PUT</h3><p>PUT：请求服务器存储一个资源，并用Request-URI作为其标识服务器会将请求主体的内容保存到URL指定的资源位置，包含两种情况：</p>
<ol>
<li><p>URL指定的资源不存在，服务器会新建一个文件，将请求主体中的内容保存到新建的文件里，响应码为201。</p>
</li>
<li><p>URL指定的资源存在，服务器会重置文件内容，用请求主体中的内容覆盖原文件内容，响应码为200或204。</p>
</li>
</ol>
<blockquote>
<p>PUT方法自身不带验证机制，任何人都可以执行，存在安全问题，所以网站一般不会使用PUT方法。</p>
</blockquote>
<p><img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202210010048091.png" alt="image-20221001004827692"></p>
<h3 id="DELETE"><a href="#DELETE" class="headerlink" title="DELETE"></a>DELETE</h3><p>DELETE：请求服务器<strong>删除Request-URI所标识的资源</strong></p>
<blockquote>
<p>和PUT一样，DELETE方法同样不带验证机制，所以网站一般也不使用DELETE方法。</p>
</blockquote>
<p><img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202210010050022.png" alt="image-20221001004920098"></p>
<h3 id="TRACE"><a href="#TRACE" class="headerlink" title="TRACE"></a>TRACE</h3><p>TRACE：路径追踪，请求服务器回送收到的请求信息，主要用于<strong>测试或诊断发送的请求是否在客户端与服务端之间传送时被网关、防火墙、代理更改</strong>。</p>
<h2 id="HTTPS与HTTP"><a href="#HTTPS与HTTP" class="headerlink" title="HTTPS与HTTP"></a>HTTPS与HTTP</h2><h3 id="HTTP与HTTPS的区别"><a href="#HTTP与HTTPS的区别" class="headerlink" title="HTTP与HTTPS的区别"></a>HTTP与HTTPS的区别</h3><img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202210160458138.png" alt="图片" style="zoom: 50%;" />

<ol>
<li><p>HTTP 是超文本传输协议，信息是明文传输，存在安全风险的问题。HTTPS 则解决 HTTP 不安全的缺陷，在 TCP 和 HTTP 网络层之间加入了 SSL&#x2F;TLS 安全协议，使得报文能够加密传输。</p>
</li>
<li><p>HTTP 连接建立相对简单， TCP 三次握手之后便可进行 HTTP 的报文传输。而HTTPS 在 TCP 三次握手之后，还需进行 SSL&#x2F;TLS 的握手过程，才可进入加密报文传输。HTTP协议运行在TCP之上，所有传输的内容都是明文，HTTPS运行在SSL&#x2F;TLS之上，SSL&#x2F;TLS运行在TCP之上，所有传输的内容都经过加密的。</p>
<blockquote>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202210160501604.png" alt="image-20221016050139257" style="zoom:50%;" />
</blockquote>
</li>
<li><p>HTTP 的端口号是 80，HTTPS 的端口号是 443。</p>
</li>
<li><p>HTTPS 协议需要向 CA（证书权威机构）申请数字证书，来保证服务器的身份是可信的。一般免费证书很少，需要交费。</p>
</li>
<li><p>HTTPS可以有效的防止运营商劫持，解决了防劫持的一个大问题</p>
</li>
</ol>
<h3 id="HTTPS解决的问题"><a href="#HTTPS解决的问题" class="headerlink" title="HTTPS解决的问题"></a>HTTPS解决的问题</h3><p>HTTP 由于是明文传输，所以安全上存在以下三个风险：</p>
<ul>
<li>窃听风险，比如通信链路上可以获取通信内容，用户号容易没。</li>
<li>篡改风险，比如强制入垃圾广告，视觉污染，用户眼容易瞎。</li>
<li>冒充风险，比如冒充淘宝网站，用户钱容易没。</li>
</ul>
<p>HTTPS 在 HTTP 与 TCP 层之间加入了 SSL&#x2F;TLS 协议。</p>
<img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202210010056682.png" alt="image-20221001005523336" style="zoom:50%;" />

<p>可以很好的解决了上述的风险：</p>
<ul>
<li>信息加密：交互信息无法被窃取，但你的号会因为「自身忘记」账号而没。</li>
<li>校验机制：无法篡改通信内容，篡改了就不能正常显示，但百度「竞价排名」依然可以搜索垃圾广告。</li>
<li>身份证书：证明淘宝是真的淘宝网，但你的钱还是会因为「剁手」而没。</li>
</ul>
<h1 id="refer"><a href="#refer" class="headerlink" title="refer"></a>refer</h1><h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.mozhe.cn/">https://www.mozhe.cn/</a> </li>
<li><a target="_blank" rel="noopener" href="https://www.mozhe.cn/bug/N2dmMnp1b1VYd2EzLzBNR3MvRVlIZz09bW96aGUmozhe">https://www.mozhe.cn/bug/N2dmMnp1b1VYd2EzLzBNR3MvRVlIZz09bW96aGUmozhe</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/WUXIAOCHANG/p/11024351.html">form-data、x-www-form-urlencoded、raw、binary的区别（非原创） - 故事爱人 - 博客园 (cnblogs.com)</a></li>
</ul>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://11pmsleep.github.io">晚上十一点睡觉</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://11pmsleep.github.io/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/0x04%20-%20%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E5%9F%BA%E7%A1%80.html">https://11pmsleep.github.io/计算机网络/0x04 - 网络协议基础.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://11pmsleep.github.io" target="_blank">晚上十一点睡觉</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></div><div class="post_share"><div class="social-share" data-image="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202208211308764.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/Python%E5%85%A8%E6%A0%88/Python%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/4.%20%E5%87%BD%E6%95%B0.html"><img class="prev-cover" src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202208182237512.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">4. 函数</div></div></a></div><div class="next-post pull-right"><a href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%BA%94%E7%94%A8%E5%B1%82/DNS/%E6%B5%8F%E8%A7%88%E5%99%A8DNS%E7%BC%93%E5%AD%98.html"><img class="next-cover" src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202208211308747.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">浏览器DNS缓存</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82/%E8%B7%AF%E7%94%B1%E6%98%AF%E4%BB%80%E4%B9%88.html" title="路由是什么"><img class="cover" src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202208182237549.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-01</div><div class="title">路由是什么</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202208151640204.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">晚上十一点睡觉</div><div class="author-info__description">晚上十一点のBlog</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">89</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">43</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">37</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/11pmsleep"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/11pmsleep" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:860637048@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=860637048" target="_blank" title="qq"><i class="fab fa-qq"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">笔记迁移整理中~~~以前习惯有道云记笔记，整理知识也算沉淀自己的一部分吧·· 加油··stay passionate and never say die!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E5%88%86%E5%B1%82"><span class="toc-number">1.</span> <span class="toc-text">网络协议分层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-number">1.1.</span> <span class="toc-text">应用层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="toc-number">1.2.</span> <span class="toc-text">传输层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-number">1.3.</span> <span class="toc-text">网络层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">1.4.</span> <span class="toc-text">数据链路层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82"><span class="toc-number">1.5.</span> <span class="toc-text">物理层</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%BE%E8%A7%A3IP"><span class="toc-number">2.</span> <span class="toc-text">图解IP</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#IP%E5%9F%BA%E6%9C%AC%E8%AE%A4%E8%AF%86"><span class="toc-number">2.1.</span> <span class="toc-text">IP基本认识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#IP%E7%9A%84%E4%BD%9C%E7%94%A8%EF%BC%9A"><span class="toc-number">2.1.1.</span> <span class="toc-text">IP的作用：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IP%E4%B8%8EMAC%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">2.1.2.</span> <span class="toc-text">IP与MAC的关系:</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IP%E5%9C%B0%E5%9D%80%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">2.2.</span> <span class="toc-text">IP地址的基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#IP%E5%9C%B0%E5%9D%80%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">2.2.1.</span> <span class="toc-text">IP地址的定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IP%E5%9C%B0%E5%9D%80%E5%88%86%E7%B1%BB"><span class="toc-number">2.2.2.</span> <span class="toc-text">IP地址分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AC%E6%9C%89IP%E4%B8%8E%E7%A7%81%E6%9C%89IP%E5%9C%B0%E5%9D%80"><span class="toc-number">2.2.3.</span> <span class="toc-text">公有IP与私有IP地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IP-%E5%9C%B0%E5%9D%80%E4%B8%8E%E8%B7%AF%E7%94%B1%E6%8E%A7%E5%88%B6"><span class="toc-number">2.2.4.</span> <span class="toc-text">IP 地址与路由控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%AF%E5%9B%9E%E5%9C%B0%E5%9D%80%E6%98%AF%E4%B8%8D%E4%BC%9A%E6%B5%81%E5%90%91%E7%BD%91%E7%BB%9C"><span class="toc-number">2.2.5.</span> <span class="toc-text">环回地址是不会流向网络</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IP-%E5%8D%8F%E8%AE%AE%E7%9B%B8%E5%85%B3%E6%8A%80%E6%9C%AF"><span class="toc-number">3.</span> <span class="toc-text">IP 协议相关技术</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#DNS-%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90"><span class="toc-number">3.1.</span> <span class="toc-text">DNS 域名解析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D%E7%9A%84%E5%B1%82%E7%BA%A7%E5%85%B3%E7%B3%BB"><span class="toc-number">3.1.1.</span> <span class="toc-text">域名的层级关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-number">3.1.2.</span> <span class="toc-text">域名解析的工作流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81DNS%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">3.1.3.</span> <span class="toc-text">常见DNS服务器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ARP-%E4%B8%8E-RARP-%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.2.</span> <span class="toc-text">ARP 与 RARP 协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%82%A3%E4%B9%88-ARP-%E5%8F%88%E6%98%AF%E5%A6%82%E4%BD%95%E7%9F%A5%E9%81%93%E5%AF%B9%E6%96%B9-MAC-%E5%9C%B0%E5%9D%80%E7%9A%84%E5%91%A2%EF%BC%9F"><span class="toc-number">3.2.1.</span> <span class="toc-text">那么 ARP 又是如何知道对方 MAC 地址的呢？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RARP-%E5%8D%8F%E8%AE%AE%E4%BD%A0%E7%9F%A5%E9%81%93%E6%98%AF%E4%BB%80%E4%B9%88%E5%90%97%EF%BC%9F"><span class="toc-number">3.2.2.</span> <span class="toc-text">RARP 协议你知道是什么吗？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DHCP-%E5%8A%A8%E6%80%81%E8%8E%B7%E5%8F%96-IP-%E5%9C%B0%E5%9D%80"><span class="toc-number">3.3.</span> <span class="toc-text">DHCP 动态获取 IP 地址</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#DHCP-%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-number">3.3.1.</span> <span class="toc-text">DHCP 工作流程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NAT-%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2"><span class="toc-number">3.4.</span> <span class="toc-text">NAT 网络地址转换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ICMP-%E4%BA%92%E8%81%94%E7%BD%91%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.5.</span> <span class="toc-text">ICMP 互联网控制报文协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ICMP-%E5%8A%9F%E8%83%BD%E9%83%BD%E6%9C%89%E5%95%A5%EF%BC%9F"><span class="toc-number">3.5.1.</span> <span class="toc-text">ICMP 功能都有啥？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ICMP-%E5%A4%A7%E8%87%B4%E5%8F%AF%E4%BB%A5%E5%88%86%E4%B8%BA%E4%B8%A4%E5%A4%A7%E7%B1%BB%EF%BC%9A"><span class="toc-number">3.5.2.</span> <span class="toc-text">ICMP 大致可以分为两大类：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%9F%E4%B8%80%E8%B5%84%E6%BA%90%E5%AE%9A%E4%BD%8D%E7%AC%A6%EF%BC%88URL%EF%BC%89%E5%92%8C%E7%BB%9F%E4%B8%80%E8%B5%84%E6%BA%90%E6%A0%87%E5%BF%97%E7%AC%A6-URI"><span class="toc-number">4.</span> <span class="toc-text">统一资源定位符（URL）和统一资源标志符(URI)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%9F%E4%B8%80%E8%B5%84%E6%BA%90%E5%AE%9A%E4%BD%8D%E7%AC%A6%EF%BC%88URL%EF%BC%89"><span class="toc-number">4.1.</span> <span class="toc-text">统一资源定位符（URL）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%9F%E4%B8%80%E8%B5%84%E6%BA%90%E6%A0%87%E5%BF%97%E7%AC%A6-URI"><span class="toc-number">4.2.</span> <span class="toc-text">统一资源标志符(URI)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#HTTP%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">5.</span> <span class="toc-text">HTTP基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">5.1.</span> <span class="toc-text">HTTP是什么</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.1.1.</span> <span class="toc-text">协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93"><span class="toc-number">5.1.2.</span> <span class="toc-text">传输</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B6%85%E6%96%87%E6%9C%AC"><span class="toc-number">5.1.3.</span> <span class="toc-text">超文本</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AF%B7%E6%B1%82%E6%B6%88%E6%81%AF"><span class="toc-number">5.2.</span> <span class="toc-text">HTTP客户端请求消息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E8%A1%8C"><span class="toc-number">5.2.1.</span> <span class="toc-text">请求行</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95"><span class="toc-number">5.2.1.1.</span> <span class="toc-text">请求方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%A4%B4%E9%83%A8%E5%AD%97%E6%AE%B5"><span class="toc-number">5.2.2.</span> <span class="toc-text">请求头部字段</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Host%EF%BC%9A"><span class="toc-number">5.2.2.1.</span> <span class="toc-text">Host：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Content-Length%EF%BC%9A"><span class="toc-number">5.2.2.2.</span> <span class="toc-text">Content-Length：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Connection%EF%BC%9AConnection"><span class="toc-number">5.2.2.3.</span> <span class="toc-text">Connection：Connection</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Content-Type%EF%BC%9A"><span class="toc-number">5.2.2.4.</span> <span class="toc-text">Content-Type：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Accept"><span class="toc-number">5.2.2.5.</span> <span class="toc-text">Accept :</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Content-Encoding"><span class="toc-number">5.2.2.6.</span> <span class="toc-text">Content-Encoding:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Accept-Encoding"><span class="toc-number">5.2.2.7.</span> <span class="toc-text">Accept-Encoding:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Connection%EF%BC%9A"><span class="toc-number">5.2.2.8.</span> <span class="toc-text">Connection：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cookie%EF%BC%9A"><span class="toc-number">5.2.2.9.</span> <span class="toc-text">Cookie：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Referer-%EF%BC%9A"><span class="toc-number">5.2.2.10.</span> <span class="toc-text">Referer ：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A9%BA%E8%A1%8C"><span class="toc-number">5.2.3.</span> <span class="toc-text">空行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E6%AD%A3%E6%96%87"><span class="toc-number">5.2.4.</span> <span class="toc-text">请求正文</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%93%8D%E5%BA%94%E6%B6%88%E6%81%AF"><span class="toc-number">5.3.</span> <span class="toc-text">HTTP服务端响应消息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E8%A1%8C"><span class="toc-number">5.3.1.</span> <span class="toc-text">状态行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-number">5.3.2.</span> <span class="toc-text">状态码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%A0%E4%B8%AA%E6%AF%94%E8%BE%83%E9%87%8D%E8%A6%81%E7%9A%84%E7%8A%B6%E6%80%81%E7%A0%81%EF%BC%9A"><span class="toc-number">5.3.2.1.</span> <span class="toc-text">几个比较重要的状态码：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%A4%B4%E9%83%A8%E5%AD%97%E6%AE%B5"><span class="toc-number">5.3.3.</span> <span class="toc-text">响应头部字段</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#X-Real-IP-%E4%B8%8E-X-Forwarded-For-%E4%B8%8E-Remote-Address"><span class="toc-number">5.3.3.1.</span> <span class="toc-text">X-Real-IP 与 X-Forwarded-For 与 Remote Address</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A9%BA%E8%A1%8C-1"><span class="toc-number">5.3.4.</span> <span class="toc-text">空行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E6%AD%A3%E6%96%87"><span class="toc-number">5.3.5.</span> <span class="toc-text">响应正文</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95%E7%90%86%E8%A7%A3"><span class="toc-number">5.4.</span> <span class="toc-text">HTTP请求方法理解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#GET"><span class="toc-number">5.4.1.</span> <span class="toc-text">GET</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#POST"><span class="toc-number">5.4.2.</span> <span class="toc-text">POST</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#POST%E6%8F%90%E4%BA%A4%E6%95%B0%E6%8D%AE%E7%9A%84%E5%87%A0%E7%A7%8D-Content-Type-%EF%BC%9A"><span class="toc-number">5.4.2.1.</span> <span class="toc-text">POST提交数据的几种 Content-Type ：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#application-x-www-form-urlencoded"><span class="toc-number">5.4.2.2.</span> <span class="toc-text">application&#x2F;x-www-form-urlencoded</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#multipart-form-data"><span class="toc-number">5.4.2.3.</span> <span class="toc-text">multipart&#x2F;form-data</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8A%E5%9B%BE%E5%86%85%E5%AE%B9%E7%BB%86%E8%8A%82%E8%A7%A3%E9%87%8A%EF%BC%9A"><span class="toc-number">5.4.2.3.1.</span> <span class="toc-text">上图内容细节解释：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E4%BA%8Econetnt-disposition%E7%9A%84%E8%A7%A3%E9%87%8A%EF%BC%9A"><span class="toc-number">5.4.2.3.2.</span> <span class="toc-text">关于conetnt-disposition的解释：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#x-www-form-urlencoded-raw"><span class="toc-number">5.4.2.4.</span> <span class="toc-text">x-www-form-urlencoded(raw)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#application-json"><span class="toc-number">5.4.2.4.1.</span> <span class="toc-text">application&#x2F;json</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#application-octet-stream"><span class="toc-number">5.4.2.5.</span> <span class="toc-text">application&#x2F;octet-stream</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HEAD"><span class="toc-number">5.4.3.</span> <span class="toc-text">HEAD</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OPTIONS"><span class="toc-number">5.4.4.</span> <span class="toc-text">OPTIONS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PUT"><span class="toc-number">5.4.5.</span> <span class="toc-text">PUT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DELETE"><span class="toc-number">5.4.6.</span> <span class="toc-text">DELETE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TRACE"><span class="toc-number">5.4.7.</span> <span class="toc-text">TRACE</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTPS%E4%B8%8EHTTP"><span class="toc-number">5.5.</span> <span class="toc-text">HTTPS与HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP%E4%B8%8EHTTPS%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">5.5.1.</span> <span class="toc-text">HTTP与HTTPS的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTPS%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">5.5.2.</span> <span class="toc-text">HTTPS解决的问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#refer"><span class="toc-number">6.</span> <span class="toc-text">refer</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B5%84%E6%BA%90"><span class="toc-number">6.1.</span> <span class="toc-text">资源</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/WEB%E5%AE%89%E5%85%A8/SQL%E6%B3%A8%E5%85%A5/0x07-Web%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80-SQL%E6%B3%A8%E5%85%A5.html" title="0x07 - Web安全基础-SQL注入"><img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202208182237495.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="0x07 - Web安全基础-SQL注入"/></a><div class="content"><a class="title" href="/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/WEB%E5%AE%89%E5%85%A8/SQL%E6%B3%A8%E5%85%A5/0x07-Web%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80-SQL%E6%B3%A8%E5%85%A5.html" title="0x07 - Web安全基础-SQL注入">0x07 - Web安全基础-SQL注入</a><time datetime="2022-11-12T08:15:30.841Z" title="更新于 2022-11-12 16:15:30">2022-11-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/WEB%E5%AE%89%E5%85%A8/SQL%E6%B3%A8%E5%85%A5/SQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%8F%8A%E7%9F%A5%E8%AF%86.html" title="SQL常用语句及知识"><img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202208211308745.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SQL常用语句及知识"/></a><div class="content"><a class="title" href="/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/WEB%E5%AE%89%E5%85%A8/SQL%E6%B3%A8%E5%85%A5/SQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%8F%8A%E7%9F%A5%E8%AF%86.html" title="SQL常用语句及知识">SQL常用语句及知识</a><time datetime="2022-11-12T07:37:40.995Z" title="更新于 2022-11-12 15:37:40">2022-11-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/WEB%E5%AE%89%E5%85%A8/SQL%E6%B3%A8%E5%85%A5/sqlmap%E5%AD%A6%E4%B9%A0.html" title="sqlmap学习"><img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202208182237539.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="sqlmap学习"/></a><div class="content"><a class="title" href="/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/WEB%E5%AE%89%E5%85%A8/SQL%E6%B3%A8%E5%85%A5/sqlmap%E5%AD%A6%E4%B9%A0.html" title="sqlmap学习">sqlmap学习</a><time datetime="2022-11-12T06:28:44.496Z" title="更新于 2022-11-12 14:28:44">2022-11-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/WEB%E5%AE%89%E5%85%A8/web%E5%AE%89%E5%85%A8%E9%9D%B6%E5%9C%BA/0x06-Web%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" title="0x06 - Web安全基础-环境搭建"><img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202208182237555.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="0x06 - Web安全基础-环境搭建"/></a><div class="content"><a class="title" href="/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/WEB%E5%AE%89%E5%85%A8/web%E5%AE%89%E5%85%A8%E9%9D%B6%E5%9C%BA/0x06-Web%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" title="0x06 - Web安全基础-环境搭建">0x06 - Web安全基础-环境搭建</a><time datetime="2022-11-11T11:48:37.635Z" title="更新于 2022-11-11 19:48:37">2022-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E7%9F%A5%E8%AF%86/Linux/Linux-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%8F%8A%E6%8A%80%E5%B7%A7.html" title="Linux常用命令及技巧"><img src="https://alvin-note.oss-cn-hangzhou.aliyuncs.com/Markdown/202208211308762.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux常用命令及技巧"/></a><div class="content"><a class="title" href="/%E7%9F%A5%E8%AF%86/Linux/Linux-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%8F%8A%E6%8A%80%E5%B7%A7.html" title="Linux常用命令及技巧">Linux常用命令及技巧</a><time datetime="2022-11-11T09:57:46.978Z" title="更新于 2022-11-11 17:57:46">2022-11-11</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By 晚上十一点睡觉</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Welcome to 11pmsleep's blog ~~~ 该网站用来记录学习笔记及生活，欢迎交流技术~~~Blog仅供个人记录笔记学习所用，若有侵权，联系我删除~若有错误，也望诸君不吝指正</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="chat_btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo.gungnir.top/',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.gungnir.top/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>